{"_id":"5b675dc1dbf0d85ae3958488","phantom":{"waitForJS":true},"recipe":"chrome-pdf","engine":"handlebars","scripts":[{"shortid":"BJX1Jw82ce"}],"shortid":"HJH11D83ce","name":"Orders","content":"<!--\r\nMore complex example demonstrating advanced features like\r\n- using custom server script to fetch remote data\r\n- using custom modules in safe sandbox\r\n- panting a chart\r\n- using global helpers\r\n- merging custom dynamic header for each individual page\r\n\r\nNote: This example requires jsreport to be configured with\r\n{ \"allowLocalFilesAccess\": true } or\r\n{ \"extensions\": { \"scripts\": { \"allowedModules\": [\"https\"] } } }\r\n!-->\r\n<html>\r\n  <head>\r\n    <meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/metro/4.1.5/css/metro.min.css\">\r\n    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js'></script>\r\n  </head>\r\n  <body>\r\n    {{#each orders}}\r\n        <!-- add hiden information to the page which is resolved in OrdersHeader template\r\n             during the pdf merge. See the docs about pdf utils extension for more details. -->\r\n        {{{pdfCreatePagesGroup country}}}\r\n        <canvas id='orders{{country}}' style=\"margin-bottom:30px\"></canvas>\r\n        <table class='table striped'>\r\n            <thead>\r\n                <tr>\r\n                    <th>OrderID</th>\r\n                    <th>ShipAddress</th>\r\n                    <th>ShipCity</th>\r\n                    <th>ShipCountry</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {{#each rows}}\r\n                <tr>\r\n                    <td>{{OrderID}}</td>\r\n                    <td>{{ShipAddress}}</td>\r\n                    <td>{{ShipCity}}</td>\r\n                    <td>{{ShipCountry}}</td>\r\n                </tr>\r\n                {{/each}}\r\n            </tbody>\r\n        </table>\r\n\r\n        <script>\r\n            // convert data into js string using function from asset global helpers.js\r\n            // this results into something like var data = { \"a\": \"foo\" }\r\n            // which gets afterwards interpreted in chrome into object\r\n            var data = {{{toJSON accumulated}}}\r\n\r\n            Chart.defaults.global.legend.display = false;\r\n\r\n            new Chart(orders{{country}}.getContext(\"2d\"), {\r\n                type: 'bar',\r\n                data: {\r\n                    labels: Object.keys(data),\r\n                    datasets: [{\r\n                        fillColor: 'blue',\r\n                        label: \"Orders in time\",\r\n                        backgroundColor: \"rgba(27,161,226,0.2)\",\r\n                        borderColor: \"rgba(27,161,226,1)\",\r\n                        borderWidth: 1,\r\n                        hoverBackgroundColor: \"rgba(27,161,226,0.4)\",\r\n                        hoverBorderColor: \"rgba(27,161,226,1)\",\r\n                        data: Object.keys(data).map(function (o) {\r\n                            return data[o].value;\r\n                        })\r\n                    }]\r\n                },\r\n                options: {\r\n                    animation: {\r\n                        duration: 0\r\n                    }\r\n                }\r\n            });\r\n        </script>\r\n        <div style='page-break-after: always;'>\r\n        </div>\r\n    {{/each}}\r\n  </body>\r\n</html>\r\n","helpers":"","chrome":{"marginTop":"4cm","marginRight":"1.5cm","marginBottom":"1.5cm","marginLeft":"1.5cm","waitForJS":"false","printBackground":"true","headerTemplate":"","footerTemplate":""},"pdfOperations":[{"type":"merge","templateShortid":"SJVbqZr9f","renderForEveryPage":true}],"modificationDate":"2018-08-06T08:42:58.616Z","workspaceId":"5b675db8dbf0d8186f958485","folder":{"shortid":"jJm9RYYt"}}